<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/v-tooltip"></script>
    <script src="https://cdn.jsdelivr.net/npm/v-copy@0.1.0/dist/v-copy.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style type="text/css">
      #submit {margin-top: 20px;}
      #user-form input {margin-bottom: 10px;}
    </style>
  </head>
  <body>
    <div id="app" v-bind:class="title">
      <h1>{{ title }}</h1>
      <user-form v-bind:userdata="userData"></user-form>
    </div>

    <template id="user-form">
      <form id="user-form">
        <div>
          <span>First Name</span>
          <div>
              <input type="text" size="50" v-bind:value="userdata.firstName"/>
          </div>
        </div>
        <div>
          <span>Last Name</span>
          <div>
              <input type="text" size="50" v-bind:value="userdata.secondName"/>
          </div>
        </div>
        <div>
          <span>Patronymic</span>
          <div>
              <input type="text" size="50" v-bind:value="userdata.patronymic"/>
          </div>
        </div>
        <button type="button" id="submit">Edit</button>
      </form>
    </template>

    <script>

      var userForm = {
        data: function () {
          return {};
        },
        template: '#user-form',
        props: {
          userdata: {

          }
        }
      };

      new Vue({
        el: '#app',
        components: {
          'user-form': userForm
        },
        data: function() {
          return {
            title: 'Hi! Welcome to my simple userlist App!',
            userData: {
              /*id: 1,
              firstName: 'Donald',
              secondName: 'McDonald',
              patronymic: 'O\'Hara',
              avatarLink: null*/
            }
          }
        },
        filters: {},
        computed: {},
        mounted: function () {
          const urlParams = new URLSearchParams(window.location.search);
          const userId = urlParams.get('userId');
          console.log('userId: ' + userId ? 1 : userId);
          console.log('App has been mounted!');
          var self = this;
          axios
          .get('http://localhost:5000/user/ + userId')
          .then(response => (this.userData = response.data))
          .catch(function (error) {
            self.userData = {};
            console.error('cannot read user list from API');
          });
        },
        methods: {
        }
      });
    </script>
  </body>
</html>
